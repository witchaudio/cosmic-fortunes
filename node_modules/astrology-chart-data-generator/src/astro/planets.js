import { PLANETS } from "./consts";
import { convertToZodiacString } from "./utils";

export const calculatePlanets = ({ ephemeris }) => {
  const { Results } = ephemeris;
  return PLANETS.reduce((planets, planet) => {
    const planetKey = planet.toLowerCase();
    const data = Results.find(({ key }) => key === planetKey);
    const degree = data.position.apparentLongitude || 0;
    return {
      ...planets,
      [planetKey]: {
        degree,
        zodiacDegree: convertToZodiacString(degree),
      },
    };
  }, {});
};
